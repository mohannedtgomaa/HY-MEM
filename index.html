<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Hy-Mem: An Infographic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: black;
            color: #D8DDEF;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        .gradient-text {
            background: linear-gradient(90deg, #3E92CC, #D8DDEF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .card {
            background-color: rgba(216, 221, 239, 0.05);
            border: 1px solid rgba(62, 146, 204, 0.3);
        }

        .flow-arrow {
            font-size: 2rem;
            line-height: 1;
        }
    </style>
</head>

<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="text-center py-12 md:py-20">
            <h1 class="text-4xl md:text-6xl font-black tracking-tight text-white">Project Hy-Mem</h1>
            <p class="mt-4 text-xl md:text-2xl font-semibold gradient-text">A Self-Organizing Knowledge System for Next-Generation AI</p>
        </header>

        <section id="introduction" class="my-12 md:my-20">
            <div class="card rounded-xl p-8 shadow-lg max-w-4xl mx-auto">
                <h2 class="text-2xl md:text-3xl font-bold text-white text-center mb-6">Introduction</h2>
                <div class="space-y-4 text-base md:text-lg leading-relaxed">
                    <p>
                        In the rapidly evolving landscape of artificial intelligence, the quest for systems that can truly understand, learn, and adapt is paramount. Project Hy-Mem is an ambitious endeavor to redefine how AI manages and utilizes knowledge, moving beyond the limitations of current static memory architectures. This project proposes a revolutionary multi-layered cognitive system designed to enable AI to possess a dynamic, self-organizing, and perpetually learning memory, akin to an artificial hippocampus. By addressing the fundamental challenges of knowledge retention, retrieval efficiency, and contextual understanding, Hy-Mem aims to unlock new frontiers in AI development, leading to more robust, personalized, and efficient intelligent agents.
                    </p>
                    <p>
                        This infographic details the architectural innovations, core mechanisms, and the profound implications of Project Hy-Mem for the future of AI. From symbolic ground truths to dynamic vector hyperspaces and explicit graph knowledge, explore how Hy-Mem creates "Memory 2.0" ‚Äì a blueprint for AI that truly remembers and learns.
                    </p>
                </div>
            </div>
        </section>
        <main>
            <section id="abstract" class="my-12 md:my-20">
                <div class="card rounded-xl p-8 shadow-lg max-w-4xl mx-auto">
                    <h2 class="text-2xl md:text-3xl font-bold text-white text-center mb-6">Abstract</h2>
                    <div class="space-y-4 text-base md:text-lg leading-relaxed">
                        <p>Current AI architectures, including Retrieval-Augmented Generation (RAG) systems, are fundamentally constrained by a static memory paradigm. Information exists in a fixed, un-learned state with a definitive knowledge cut-off, forcing a reliance on computationally expensive context windows for continuity. This approach not only incurs significant operational costs but also prevents models from achieving true contextual understanding, leading to factual errors from outdated knowledge, which erodes user trust and introduces significant operational risk.</p>
                        <p>Project Hy-Mem challenges this paradigm by introducing a multi-layered, hybrid cognitive architecture for persistent AI memory. The system is founded on a Symbolic Guardrail Layer, or "Ground Truth," where users can assert immutable, high-priority facts (e.g., safety constraints, core preferences) to ensure a baseline of predictable, personalized behavior.</p>
                        <p>Layered upon this is the system's adaptive core: the "Living Embedding." These embeddings are dynamic entities that continuously reposition themselves within a vector hyperspace based on a tripartite scoring system: usage frequency (Alpha, Œ±), a reinforcement learning-driven measure of utility and faithfulness (Phi, œÜ), and temporal decay (Delta, Œ¥). This self-organizing process causes high-value, trusted information to form dense knowledge clusters. These clusters are complemented by an explicit Graph Knowledge Layer that maps factual, relational connections between entities, enabling complex, multi-hop reasoning.</p>
                        <p>Key innovations include a proactive learning mechanism, Targeted Knowledge Enrichment, which uses cluster health monitoring to surgically fill knowledge gaps and eliminate the need for costly retraining. This is complemented by a cost-aware, four-tier storage model that aligns operational cost with data relevance, ensuring economic viability at scale.</p>
                        <p>In essence, Hy-Mem presents a blueprint for "Memory 2.0", a shift from static information retrieval to a dynamic, self-organizing, and perpetually learning knowledge system. It provides the foundational architecture for creating truly persistent, personalized, and efficient AI systems.</p>
                    </div>
                </div>
            </section>

            <section id="problem" class="my-12 md:my-20">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">The Problem: The Static Memory Barrier</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg">Current AI memory architectures are inefficient, costly, and unintelligent, creating a ceiling on AI's true potential.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="card rounded-xl p-6 shadow-lg">
                        <div class="text-4xl mb-4">üìö</div>
                        <h3 class="text-xl font-bold text-white mb-2">Static Vector Databases</h3>
                        <p>Memory is a fixed library. The system can't learn which sources are useful, outdated, or untrustworthy.</p>
                    </div>
                    <div class="card rounded-xl p-6 shadow-lg">
                        <div class="text-4xl mb-4">üí∞</div>
                        <h3 class="text-xl font-bold text-white mb-2">Brute-Force Context Windows</h3>
                        <p>An incredibly expensive and slow solution that fails to create persistent memory, re-learning everything on every call.</p>
                    </div>
                    <div class="card rounded-xl p-6 shadow-lg">
                        <div class="text-4xl mb-4">üîó</div>
                        <h3 class="text-xl font-bold text-white mb-2">No Relational Understanding</h3>
                        <p>Systems struggle with complex queries that require connecting multiple pieces of information across contexts.</p>
                    </div>
                </div>
                <div class="mt-12 card rounded-xl p-6 shadow-lg">
                    <h3 class="text-xl md:text-2xl font-bold text-white text-center mb-4">The Cost of Static Memory</h3>
                    <p class="text-center mb-6 max-w-2xl mx-auto">Static approaches are inefficient. Brute-force context windows often process vast amounts of redundant data, leading to higher costs and latency.</p>
                    <div class="chart-container h-64 md:h-80">
                        <canvas id="costChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="solution" class="my-12 md:my-20">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">The Solution: A Multi-Layered Cognitive Architecture</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg">Hy-Mem introduces a hybrid architecture that functions like an artificial hippocampus, enabling persistent, adaptive memory.</p>
                </div>
                <div class="flex flex-col items-center space-y-4">
                    <div class="card rounded-xl p-8 shadow-lg w-full md:w-2/3 text-center">
                        <span class="text-sm font-bold gradient-text">LAYER 0</span>
                        <h3 class="text-2xl font-bold text-white mt-1">Symbolic "Ground Truth"</h3>
                        <p class="mt-2">A user-governed, rule-based layer for immutable facts like safety constraints and core preferences, providing a deterministic foundation.</p>
                    </div>
                    <div class="flow-arrow gradient-text">‚Üì</div>
                    <div class="card rounded-xl p-8 shadow-lg w-full md:w-2/3 text-center">
                        <span class="text-sm font-bold gradient-text">LAYER 1</span>
                        <h3 class="text-2xl font-bold text-white mt-1">Dynamic Vector Space</h3>
                        <p class="mt-2">The adaptive core, populated by "Living Embeddings" that continuously reposition themselves in a self-organizing hyperspace based on a tripartite scoring system (Œ±, œÜ, Œ¥).</p>
                    </div>
                    <div class="flow-arrow gradient-text">‚Üì</div>
                    <div class="card rounded-xl p-8 shadow-lg w-full md:w-2/3 text-center">
                        <span class="text-sm font-bold gradient-text">LAYER 2</span>
                        <h3 class="text-2xl font-bold text-white mt-1">Graph Knowledge Layer</h3>
                        <p class="mt-2">An explicit graph of entities and relationships that enables complex, multi-hop relational reasoning impossible with semantic retrieval alone.</p>
                    </div>
                    <div class="flow-arrow gradient-text">‚Üì</div>
                    <div class="card rounded-xl p-8 shadow-lg w-full md:w-2/3 text-center">
                        <span class="text-sm font-bold gradient-text">LAYER 3</span>
                        <h3 class="text-2xl font-bold text-white mt-1">Procedural Layer</h3>
                        <p class="mt-2">By remembering processes, not just facts, this layer allows Hy-Mem to bridge the gap between knowing what and understanding how.</p>
                    </div>
                </div>
            </section>

            <section id="innovations" class="my-12 md:my-20">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Core Innovations</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg">Hy-Mem's novelty lies in four key areas that create a truly dynamic and intelligent system.</p>
                </div>

                <div class="card rounded-xl p-6 md:p-8 shadow-lg mb-12">
                    <h3 class="text-xl md:text-2xl font-bold text-white text-center mb-2">The "Living Embedding" & Self-Organizing Hyperspace</h3>
                    <p class="text-center mb-8 max-w-3xl mx-auto">The system learns what's important. High-value information forms dense clusters, while irrelevant data is pushed to the periphery, enabling faster, more accurate retrieval.</p>
                    <div class="chart-container h-80 md:h-96">
                        <canvas id="hyperspaceChart"></canvas>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="card rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-bold text-white mb-4">Targeted Knowledge Enrichment</h3>
                        <p class="mb-4">A proactive, self-healing pipeline that autonomously monitors knowledge health and surgically integrates new information to fill gaps, eliminating costly, full-scale retraining.</p>
                        <div class="chart-container h-48">
                            <canvas id="enrichmentChart"></canvas>
                        </div>
                    </div>
                    <div class="card rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-bold text-white mb-4">User-Governed Memory</h3>
                        <p>Explicit HCI mechanisms like `Remember` and `Forget` give users deterministic control over the AI's memory, fostering trust and a collaborative partnership.</p>
                        <div class="flex justify-around items-center h-48 text-center">
                            <div>
                                <div class="text-5xl">üß†</div>
                                <p class="mt-2 font-semibold text-white">Remember</p>
                            </div>
                            <div>
                                <div class="text-5xl">üóëÔ∏è</div>
                                <p class="mt-2 font-semibold text-white">Forget</p>
                            </div>
                        </div>
                    </div>
                    <div class="card rounded-xl p-6 shadow-lg md:col-span-2 lg:col-span-1">
                        <h3 class="text-xl font-bold text-white mb-4">Cost-Aware Tiered Storage</h3>
                        <p class="mb-4">A four-tier storage model (Hot, Warm, Cold, Frozen) aligns the operational cost of data with its real-time relevance, ensuring economic viability at scale.</p>
                        <div class="chart-container h-48">
                            <canvas id="storageChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <section id="research-vision" class="my-12 md:my-20">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Research Vision & Key Questions</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg">The academic foundation of Hy-Mem is built on three core research pillars, each designed to answer a fundamental question about the future of AI:</p>
                </div>

                <div class="space-y-8 max-w-3xl mx-auto">
                    <div class="card rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-bold text-white">Pillar 1: Self-Adapting Algorithms</h3>
                        <ul class="list-disc list-inside mt-2">
                            <li class="text-lg italic">
                                How can we move beyond static embeddings and develop a mathematically principled model for a dynamic, "living" memory that adapts over time?
                            </li>
                        </ul>
                    </div>

                    <div class="card rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-bold text-white">Pillar 2: Computational & Energy Efficiency</h3>
                        <ul class="list-disc list-inside mt-2">
                            <li class="text-lg italic">
                                What novel architectures can enable this complex memory system to operate with significantly less computational power, leading to a greener and more scalable AI?
                            </li>
                        </ul>
                    </div>

                    <div class="card rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-bold text-white">Pillar 3: Autonomous Learning & Salience</h3>
                        <ul class="list-disc list-inside mt-2">
                            <li class="text-lg italic">
                                How can a system develop true salience, autonomously identifying its own knowledge gaps and proactively seeking new information to build a more complete and accurate worldview?
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="sandbox" class="my-12 md:my-20">
                <h2 class="text-3xl font-bold text-white text-center mb-8">The Playground (Sandbox)</h2>
                <div class="card p-8 rounded-lg"> <div class="text-center mb-6">
                        <p class="text-lg text-gray-300">Step 1: Train the Agent</p>
                        <p class="text-gray-400 mb-4">Click "Like" üëç on "Graph-Based RAG" articles and "Dislike" üëé on "Keyword Search" articles to teach Hy-Mem your preferences.</p>
                        <button id="reset-button" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">Reset Memory</button>
                    </div>
                    <div id="documents-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                        </div>

                    <div class="text-center mb-6">
                        <p class="text-lg text-gray-300">Step 2: Run the A/B Test</p>
                        <p class="text-gray-400 mb-4">Issue a broad query for "Tell me about RAG" and see how each agent responds.</p>
                        <button id="search-button" class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">Run Generic Query</button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                        <div>
                            <h3 class="text-xl font-semibold text-white mb-4 text-center">Static RAG Results</h3>
                            <div id="static-results" class="space-y-3">
                                <p class="text-gray-500 text-center">Run a query to see results.</p>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-cyan-400 mb-4 text-center">Hy-Mem Agent Results</h3>
                            <div id="hymem-results" class="space-y-3">
                                <p class="text-gray-500 text-center">Run a query to see results.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="about" class="my-12 md:my-20">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">About the Author</h2>
                </div>
                <div class="card rounded-xl p-8 shadow-lg max-w-5xl mx-auto flex flex-col md:flex-row items-center text-center md:text-left gap-8">
                    <div class="flex-shrink-0">
                        <img class="rounded-full w-40 h-40 object-cover border-4 border-[#3E92CC]" src="./assets/hs1.png" alt="Mohanned Gomaa Headshot">
                    </div>
                    <div class="flex-grow">
                        <h3 class="text-2xl font-bold text-white">Mohanned T. Gomaa</h3>
                        <p class="mt-4 text-base leading-relaxed">
                            As an AI and GenAI platform architect with 13+ years of experience in the GCC, I specialize in building high-impact, enterprise-grade systems that bridge bold vision with scalable execution. I thrive on architecting compliance-ready, sovereign AI solutions from the ground up, blending advanced RAG and modern MLOps to deliver in high-stakes, C-suite environments.
                        </p>
                        <p class="mt-3 text-base leading-relaxed">
                            My work has delivered over $25M in impact across 40+ deployments, including a $7M municipal command & control platform and AI tools that increased sales conversion by 14%. My current research, detailed in Project Hy-Mem, moves beyond conventional RAG to create dynamic AI systems with true long-term memory and autonomous learning capabilities.
                        </p>
                        <p class="mt-3 text-base leading-relaxed">
                            If you're building the future of AI, from sovereign LLM infrastructure to intelligent systems at scale, let's connect.
                        </p>
                        <div class="mt-6 flex items-center justify-center md:justify-start space-x-5">
                            <a href="mailto:mo@vectorscalar.ai" title="Email" class="text-gray-400 hover:gradient-text transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                </svg>
                            </a>
                            <a href="https://www.linkedin.com/in/mohannedtgomaa/" title="LinkedIn" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:gradient-text transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z" />
                                </svg>
                            </a>
                            <a href="https://orcid.org/0009-0004-3222-3759" title="ORCID" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:gradient-text transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 0C5.372 0 0 5.372 0 12s5.372 12 12 12 12-5.372 12-12S18.628 0 12 0zM7.603 4.2h1.313v11.305H7.603V4.2zm2.632 0h1.312v11.305h-1.312V4.2zm2.632 0h1.312v11.305h-1.312V4.2zM12 17.43c-3.11 0-5.64-2.53-5.64-5.64s2.53-5.64 5.64-5.64 5.64 2.53 5.64 5.64-2.53 5.64-5.64 5.64z" />
                                </svg>
                            </a>
                            <a href="https://www.mo-gomaa.com" title="Website" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:gradient-text transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center py-12 mt-12 border-t border-gray-700">
            <p class="text-white font-bold text-lg">Project Hy-Mem</p>
            <p class="text-sm">Mohanned T. Gomaa | ORCID:0009-0004-3222-3759 | August 22, 2025 </p>
            <p class="text-sm">¬© 2025 Mohanned Tarek Gomaa‚Ñ¢. All rights reserved. The content, architecture, and code described on this site are the proprietary intellectual property of the author. No part of this work may be reproduced without explicit permission. </p>
        </footer>

    </div>

    <script>
        // I've also formatted the JavaScript code for better readability.
        // --- PART 1: THE LAWS OF PHYSICS (Hy-Mem Engine in JS) ---
        const sigmoid = (x) => 1 / (1 + Math.exp(-x));
        const calculateAlphaPrime = (alpha_raw, k_alpha = 0.1, alpha_0 = 5) => sigmoid(k_alpha * (alpha_raw - alpha_0));
        const calculatePhi = (phi_raw, k_phi = 0.5) => Math.tanh(k_phi * phi_raw);
        const calculateScalar = (alpha_prime, phi, M = 0.8, phi_kill_threshold = -0.5) => {
            if (phi < phi_kill_threshold) return 0.0;
            return 1 + M * (alpha_prime * phi);
        };

        // --- PART 2: THE ARENA (A Mini-World in JS) ---
        const concepts = ["Vanilla RAG", "Graph-Based RAG", "Vector Search", "Keyword Search"];
        let knowledgeBase = [];
        let userState = {};

        const cosineSimilarity = (vecA, vecB) => {
            const dotProduct = vecA.reduce((acc, val, i) => acc + val * vecB[i], 0);
            const magA = Math.sqrt(vecA.reduce((acc, val) => acc + val * val, 0));
            const magB = Math.sqrt(vecB.reduce((acc, val) => acc + val * val, 0));
            if (magA === 0 || magB === 0) return 0;
            return dotProduct / (magA * magB);
        };

        const createWorld = () => {
            knowledgeBase = [];
            userState = {};
            const centroids = {
                "Vanilla RAG": [0.8, 0.2, 0.1, 0.3],
                "Graph-Based RAG": [0.2, 0.8, 0.3, 0.1],
                "Vector Search": [0.7, 0.4, 0.2, 0.4],
                "Keyword Search": [0.1, 0.1, 0.9, 0.2]
            };
            for (let i = 0; i < 20; i++) {
                const concept = concepts[i % concepts.length];
                const centroid = centroids[concept];
                const vector = centroid.map(v => v + (Math.random() - 0.5) * 0.5);
                const norm = Math.sqrt(vector.reduce((acc, val) => acc + val * val, 0));
                const normalizedVector = vector.map(v => v / norm);
                knowledgeBase.push({
                    id: i,
                    title: `${concept} Doc #${i}`,
                    concept: concept,
                    vector: normalizedVector
                });
                userState[i] = {
                    alpha_raw: 0,
                    phi_raw: 0
                };
            }
        };

        // --- PART 3: THE DEMO LOGIC ---
        const documentsContainer = document.getElementById('documents-container');
        const searchButton = document.getElementById('search-button');
        const resetButton = document.getElementById('reset-button');
        const staticResultsContainer = document.getElementById('static-results');
        const hymemResultsContainer = document.getElementById('hymem-results');

        const renderDocuments = () => {
            documentsContainer.innerHTML = '';
            knowledgeBase.forEach(doc => {
                const card = document.createElement('div');
                card.className = 'bg-gray-700 p-4 rounded-lg flex flex-col justify-between';

                let conceptColor = 'text-gray-400';
                if (doc.concept === 'Graph-Based RAG') conceptColor = 'text-cyan-400';
                if (doc.concept === 'Keyword Search') conceptColor = 'text-red-400';

                card.innerHTML = `
                    <div>
                        <h4 class="font-bold text-white text-sm">${doc.title}</h4>
                        <p class="text-xs ${conceptColor}">${doc.concept}</p>
                    </div>
                    <div class="flex justify-end space-x-2 mt-3">
                        <button data-id="${doc.id}" data-feedback="like" class="like-btn bg-gray-600 hover:bg-green-500 p-1 rounded-full text-sm">üëç</button>
                        <button data-id="${doc.id}" data-feedback="dislike" class="dislike-btn bg-gray-600 hover:bg-red-500 p-1 rounded-full text-sm">üëé</button>
                    </div>
                `;
                documentsContainer.appendChild(card);
            });
        };

        const handleFeedback = (e) => {
            if (!e.target.matches('.like-btn, .dislike-btn')) return;
            const id = parseInt(e.target.dataset.id);
            const feedback = e.target.dataset.feedback;

            userState[id].alpha_raw += 1;
            if (feedback === 'like') {
                userState[id].phi_raw += 2;
                e.target.closest('.bg-gray-700').style.borderColor = '#22d3ee';
                e.target.closest('.bg-gray-700').style.borderWidth = '1px';
            } else {
                userState[id].phi_raw -= 5;
                e.target.closest('.bg-gray-700').style.borderColor = '#f87171';
                e.target.closest('.bg-gray-700').style.borderWidth = '1px';
            }
            console.log(`Updated user state for ID ${id}:`, userState[id]);
        };

        const runSearch = () => {
            const queryVector = [0.5, 0.5, 0.2, 0.2]; // A truly broad query

            // Static RAG
            let staticScores = knowledgeBase.map(doc => ({
                doc,
                score: cosineSimilarity(queryVector, doc.vector)
            }));
            staticScores.sort((a, b) => b.score - a.score);
            renderResults(staticResultsContainer, staticScores.slice(0, 5));

            // Hy-Mem Agent
            let hymemScores = knowledgeBase.map(doc => {
                const base_sim = cosineSimilarity(queryVector, doc.vector);
                const state = userState[doc.id];
                const alpha_p = calculateAlphaPrime(state.alpha_raw);
                const phi = calculatePhi(state.phi_raw);
                const scalar = calculateScalar(alpha_p, phi);
                const bonus = (scalar - 1.0) * 2.0; // personalization_strength
                return {
                    doc,
                    score: base_sim + bonus
                };
            });
            hymemScores.sort((a, b) => b.score - a.score);
            renderResults(hymemResultsContainer, hymemScores.slice(0, 5));
        };

        const renderResults = (container, results) => {
            container.innerHTML = '';
            if (results.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center">No results found.</p>';
                return;
            }
            results.forEach(result => {
                const card = document.createElement('div');
                card.className = 'result-card bg-gray-700 p-3 rounded-lg text-sm';

                let conceptColor = 'text-gray-400';
                if (result.doc.concept === 'Graph-Based RAG') conceptColor = 'text-cyan-400';
                if (result.doc.concept === 'Keyword Search') conceptColor = 'text-red-400';

                card.innerHTML = `
                    <p class="font-semibold text-white">${result.doc.title}</p>
                    <p class="text-xs ${conceptColor}">${result.doc.concept}</p>
                    <p class="text-xs text-gray-500 mt-1">Score: ${result.score.toFixed(4)}</p>
                `;
                container.appendChild(card);
            });
        };

        const initialize = () => {
            createWorld();
            renderDocuments();
        };

        // Event Listeners
        documentsContainer.addEventListener('click', handleFeedback);
        searchButton.addEventListener('click', runSearch);
        resetButton.addEventListener('click', () => {
            console.log("Resetting memory...");
            initialize();
            staticResultsContainer.innerHTML = '<p class="text-gray-500 text-center">Run a query to see results.</p>';
            hymemResultsContainer.innerHTML = '<p class="text-gray-500 text-center">Run a query to see results.</p>';
        });

        // Initial load
        initialize();
    </script>
    <script>
        // Chart rendering script
        const wrapLabel = (label, maxWidth = 16) => {
            if (typeof label !== 'string' || label.length <= maxWidth) {
                return label;
            }
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + word).length > maxWidth) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            lines.push(currentLine.trim());
            return lines;
        };

        const chartTooltipConfig = {
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                                return label.join(' ');
                            }
                            return label;
                        }
                    }
                }
            }
        };

        const brilliantBlues = {
            dark: '#000000',
            medium: '#3E92CC',
            light: '#D8DDEF',
            white: '#FFFFFF',
            accent: '#FFC914'
        };

        Chart.defaults.color = brilliantBlues.light;
        Chart.defaults.borderColor = 'rgba(62, 146, 204, 0.3)';
        Chart.defaults.font.family = "'Inter', sans-serif";

        new Chart(document.getElementById('costChart'), {
            type: 'bar',
            data: {
                labels: ['Static RAG', wrapLabel('Large Context Window'), 'Hy-Mem'],
                datasets: [{
                    label: 'Relative Cost per Query',
                    data: [65, 100, 15],
                    backgroundColor: [brilliantBlues.medium, 'rgba(255, 201, 20, 0.2)', brilliantBlues.accent],
                    borderColor: [brilliantBlues.medium, brilliantBlues.accent, brilliantBlues.accent],
                    borderWidth: 2
                }]
            },
            options: {
                ...chartTooltipConfig,
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Relative Cost (Large Context = 100)',
                            color: brilliantBlues.light
                        },
                        grid: {
                            color: 'rgba(216, 221, 239, 0.2)'
                        },
                        ticks: {
                            color: brilliantBlues.light
                        }
                    },
                    y: {
                        grid: {
                            color: 'rgba(216, 221, 239, 0.1)'
                        },
                        ticks: {
                            color: brilliantBlues.light
                        }
                    }
                },
                plugins: {
                    ...chartTooltipConfig.plugins,
                    legend: {
                        display: false
                    }
                }
            }
        });

        const generateClusterData = (count, centerX, centerY, spread) => {
            const data = [];
            for (let i = 0; i < count; i++) {
                data.push({
                    x: centerX + (Math.random() - 0.5) * spread,
                    y: centerY + (Math.random() - 0.5) * spread
                });
            }
            return data;
        };

        new Chart(document.getElementById('hyperspaceChart'), {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'High-Value Knowledge Cluster',
                    data: generateClusterData(50, -0.6, 0.6, 0.5),
                    backgroundColor: brilliantBlues.accent
                }, {
                    label: 'Related Knowledge Sub-Cluster',
                    data: generateClusterData(30, 0.5, -0.4, 0.6),
                    backgroundColor: brilliantBlues.medium
                }, {
                    label: 'Low-Value / Decayed Knowledge',
                    data: generateClusterData(20, 0, 0, 2),
                    backgroundColor: 'rgba(216, 221, 239, 0.2)'
                }]
            },
            options: {
                ...chartTooltipConfig,
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        display: false
                    },
                    y: {
                        display: false
                    }
                },
                plugins: {
                    ...chartTooltipConfig.plugins,
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12
                        }
                    }
                }
            }
        });

        new Chart(document.getElementById('enrichmentChart'), {
            type: 'line',
            data: {
                labels: ['Q1', 'Q2', 'Q3', 'Q4', 'Q1 Next'],
                datasets: [{
                    label: 'Knowledge Cluster Health',
                    data: [95, 92, 65, 70, 98],
                    borderColor: brilliantBlues.accent,
                    backgroundColor: 'rgba(255, 201, 20, 0.2)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                ...chartTooltipConfig,
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        title: {
                            display: true,
                            text: 'Health Score',
                            color: brilliantBlues.light
                        },
                        grid: {
                            color: 'rgba(216, 221, 239, 0.2)'
                        },
                        ticks: {
                            color: brilliantBlues.light
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(216, 221, 239, 0.1)'
                        },
                        ticks: {
                            color: brilliantBlues.light
                        }
                    }
                },
                plugins: {
                    ...chartTooltipConfig.plugins,
                    legend: {
                        display: false
                    }
                }
            }
        });

        new Chart(document.getElementById('storageChart'), {
            type: 'bar',
            data: {
                labels: ['Data Volume', 'Operational Cost'],
                datasets: [{
                    label: 'Hot (In-Memory)',
                    data: [5, 50],
                    backgroundColor: brilliantBlues.accent
                }, {
                    label: 'Warm (SSD)',
                    data: [15, 30],
                    backgroundColor: brilliantBlues.medium
                }, {
                    label: 'Cold (Object)',
                    data: [50, 15],
                    backgroundColor: 'rgba(62, 146, 204, 0.5)'
                }, {
                    label: 'Frozen (Archive)',
                    data: [30, 5],
                    backgroundColor: 'rgba(216, 221, 239, 0.2)'
                }]
            },
            options: {
                ...chartTooltipConfig,
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    ...chartTooltipConfig.plugins,
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12
                        }
                    }
                },
                scales: {
                    x: {
                        stacked: true,
                        grid: {
                            color: 'rgba(216, 221, 239, 0.1)'
                        },
                        ticks: {
                            color: brilliantBlues.light
                        }
                    },
                    y: {
                        stacked: true,
                        title: {
                            display: true,
                            text: 'Relative %',
                            color: brilliantBlues.light
                        },
                        grid: {
                            color: 'rgba(216, 221, 239, 0.2)'
                        },
                        ticks: {
                            color: brilliantBlues.light
                        }
                    }
                }
            }
        });
    </script>
</body>

</html>
